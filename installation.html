<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installation &mdash; slsDetectorPackage  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/extra.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Dependencies" href="dependencies.html" />
    <link rel="prev" title="Welcome to slsDetectorPackage’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> slsDetectorPackage
          </a>
              <div class="version">
                7.0.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Installation:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#install-binaries-using-conda">Install binaries using conda</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-from-source">Build from source</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#download-source-code-from-github">1. Download Source Code from github</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-from-source-using-cmake">2. Build from Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-using-cmake">Build using CMake</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-using-in-built-cmk-sh-script">Build using in-built cmk.sh script</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-on-old-distributions">Build on old distributions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-slsdetectorgui-qt5">Build slsDetectorGui (Qt5)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-this-documentation">Build this documentation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dependencies.html">Dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="consuming.html">Consuming slsDetectorPackage</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">C++ API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="detector.html">Detector</a></li>
<li class="toctree-l1"><a class="reference internal" href="result.html">Result</a></li>
<li class="toctree-l1"><a class="reference internal" href="receiver_api.html">Receiver</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pygettingstarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="pydetector.html">Detector</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyenums.html">Enums</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyexamples.html">Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Command line</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="commandline.html">Command line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="quick_start_guide.html">Quick Start Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="container_utils.html">ContainerUtils</a></li>
<li class="toctree-l1"><a class="reference internal" href="type_traits.html">TypeTraits</a></li>
<li class="toctree-l1"><a class="reference internal" href="ToString.html">ToString</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Firmware</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="firmware.html">Firmware Upgrade</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Detector Server</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="servers.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="serverupgrade.html">Upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="virtualserver.html">Simulators</a></li>
<li class="toctree-l1"><a class="reference internal" href="serverdefaults.html">Default Values</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Detector UDP Header</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="udpheader.html">Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="udpconfig.html">Config file</a></li>
<li class="toctree-l1"><a class="reference internal" href="udpdetspec.html">Detector Specific Fields</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Receiver</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="receivers.html">Receivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="slsreceiver.html">slsReceiver/ slsMultiReceiver</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Troubleshooting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">slsDetectorPackage</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Installation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/installation.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="admonition note">
<p class="admonition-title">Note</p>
<p>The default branch of our git repository is developer. It contains the
latest development version. It is expected to compile and work but
features might be added or tweaked. In some cases the API might also change
without being communicated. If absolute stability of the API is needed please
use one of the release versions.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Before building from source make sure that you have the
<a class="reference internal" href="dependencies.html"><span class="doc">dependencies</span></a> installed. If installing using conda, conda will
manage the dependencies. Avoid also installing packages with pip.</p>
</div>
<section id="installation">
<span id="id1"></span><h1>Installation<a class="headerlink" href="#installation" title="Permalink to this heading"></a></h1>
<section id="install-binaries-using-conda">
<h2>Install binaries using conda<a class="headerlink" href="#install-binaries-using-conda" title="Permalink to this heading"></a></h2>
<p>Conda is not only useful to manage python environments but can also
be used as a user space package manager. Dates in the tag (for eg. 2020.07.23.dev0)
are from the developer branch. Please use released tags for stability.</p>
<p>We have three different packages available:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>slsdetlib</strong> shared libraries and command line utilities</p></li>
<li><p><strong>slsdetgui</strong> GUI</p></li>
<li><p><strong>slsdet</strong> Python bindings</p></li>
</ul>
</div></blockquote>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#Add channels for dependencies and our library</span>
conda config --add channels conda-forge
conda config --add channels slsdetectorgroup
conda config --set channel_priority strict

<span class="c1">#create and activate an environment with our library</span>
<span class="c1">#replace 6.1.1 with the required tag</span>
conda create -n myenv <span class="nv">slsdetlib</span><span class="o">=</span><span class="m">6</span>.1.1
conda activate myenv

<span class="c1">#ready to use</span>
sls_detector_get exptime
etc ...
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#List available versions</span>
<span class="c1"># lib and binaries</span>
conda search slsdetlib
<span class="c1"># python</span>
conda search slsdet
<span class="c1"># gui</span>
conda search slsdetgui
</pre></div>
</div>
</section>
<section id="build-from-source">
<h2>Build from source<a class="headerlink" href="#build-from-source" title="Permalink to this heading"></a></h2>
<section id="download-source-code-from-github">
<h3>1. Download Source Code from github<a class="headerlink" href="#download-source-code-from-github" title="Permalink to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/slsdetectorgroup/slsDetectorPackage.git --branch <span class="m">6</span>.1.1
</pre></div>
</div>
<div class="line-block">
<div class="line"><strong>Pybind for Python</strong></div>
<div class="line">v7.0.0+:</div>
<div class="line-block">
<div class="line">pybind11 packaged into ‘libs/pybind’. No longer a submodule. No need for “recursive” or “submodule update”.</div>
<div class="line"><br /></div>
</div>
<div class="line">Older versions:</div>
<div class="line-block">
<div class="line">pybind11 is a submodule. Must be cloned using “recursive” and updated when switching between versions using the following commands.</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># clone using recursive to get pybind11 submodule</span>
git clone --recursive https://github.com/slsdetectorgroup/slsDetectorPackage.git

<span class="c1"># update submodule when switching between releases</span>
<span class="nb">cd</span> slsDetectorPackage
git submodule update --init
</pre></div>
</div>
</section>
<section id="build-from-source-using-cmake">
<span id="id2"></span><h3>2. Build from Source<a class="headerlink" href="#build-from-source-using-cmake" title="Permalink to this heading"></a></h3>
</section>
<section id="build-using-cmake">
<h3>Build using CMake<a class="headerlink" href="#build-using-cmake" title="Permalink to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># outside slsDetecorPackage folder</span>
mkdir build <span class="o">&amp;&amp;</span> <span class="nb">cd</span> build

<span class="c1"># configure &amp; generate Makefiles using cmake</span>
<span class="c1"># by listing all your options (alternately use ccmake described below)</span>
<span class="c1"># cmake3 for some systems</span>
cmake ../slsDetectorPackage -DCMAKE_INSTALL_PREFIX<span class="o">=</span>/your/install/path

<span class="c1"># compiled to the build/bin directory</span>
make -j12 <span class="c1">#or whatever number of cores you are using to build</span>

<span class="c1"># install headers and libs in /your/install/path directory</span>
make install
</pre></div>
</div>
<p>Instead of the cmake command, one can use ccmake to get a list of options to configure and generate Makefiles at ease.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ccmake3 for some systems</span>
ccmake ..

<span class="c1"># choose the options</span>
<span class="c1"># first press [c] - configure</span>
<span class="c1"># then press [g] - generate</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 42%" />
<col style="width: 58%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Example cmake options</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>-DSLS_USE_PYTHON=ON</p></td>
<td><p>Python</p></td>
</tr>
<tr class="row-odd"><td><p>-DPython_FIND_VIRTUALENV=ONLY</p></td>
<td><p>Python from only the conda environment</p></td>
</tr>
<tr class="row-even"><td><p>-DZeroMQ_HINT=/usr/lib64</p></td>
<td><p>Use system zmq instead</p></td>
</tr>
<tr class="row-odd"><td><p>-DSLS_USE_GUI=ON</p></td>
<td><p>GUI</p></td>
</tr>
</tbody>
</table>
</section>
<section id="build-using-in-built-cmk-sh-script">
<h3>Build using in-built cmk.sh script<a class="headerlink" href="#build-using-in-built-cmk-sh-script" title="Permalink to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>The binaries are generated <span class="k">in</span> slsDetectorPackage/build/bin directory.

Usage: ./cmk.sh <span class="o">[</span>-b<span class="o">]</span> <span class="o">[</span>-c<span class="o">]</span> <span class="o">[</span>-d &lt;HDF5 directory&gt;<span class="o">]</span> <span class="o">[</span>e<span class="o">]</span> <span class="o">[</span>g<span class="o">]</span> <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>i<span class="o">]</span> <span class="o">[</span>-j &lt;Number of threads&gt;<span class="o">]</span>
<span class="o">[</span>-k &lt;CMake command&gt;<span class="o">]</span> <span class="o">[</span>-l &lt;Install directory&gt;<span class="o">]</span> <span class="o">[</span>m<span class="o">]</span> <span class="o">[</span>n<span class="o">]</span> <span class="o">[</span>-p<span class="o">]</span> <span class="o">[</span>-q &lt;Zmq hint directory&gt;<span class="o">]</span>
<span class="o">[</span>r<span class="o">]</span> <span class="o">[</span>s<span class="o">]</span> <span class="o">[</span>t<span class="o">]</span> <span class="o">[</span>u<span class="o">]</span> <span class="o">[</span>z<span class="o">]</span>
-<span class="o">[</span>no option<span class="o">]</span>: only make
-b: Builds/Rebuilds CMake files normal mode
-c: Clean
-d: HDF5 Custom Directory
-e: Debug mode
-g: Build/Rebuilds only gui
-h: Builds/Rebuilds Cmake files with HDF5 package
-i: Builds tests
-j: Number of threads to compile through
-k: CMake <span class="nb">command</span>
-l: Install directory
-m: Manuals
-n: Manuals without compiling doxygen <span class="o">(</span>only rst<span class="o">)</span>
-p: Builds/Rebuilds Python API
-q: Zmq hint directory
-r: Build/Rebuilds only receiver
-s: Simulator
-t: Build/Rebuilds only text client
-u: Chip Test Gui
-z: Moench zmq processor


<span class="c1"># get all options</span>
./cmk.sh -?

<span class="c1"># new build and compile in parallel:</span>
./cmk.sh -bj5

<span class="c1"># new build, python and compile in parallel:</span>
./cmk.sh -bpj5

<span class="c1">#To use the system zmq (/usr/lib64) instead</span>
./cmk.sh -bj5 -q /usr/lib64
</pre></div>
</div>
</section>
<section id="build-on-old-distributions">
<h3>Build on old distributions<a class="headerlink" href="#build-on-old-distributions" title="Permalink to this heading"></a></h3>
<p>If your linux distribution doesn’t come with a C++11 compiler (gcc&gt;4.8) then
it’s possible to install a newer gcc using conda and build the slsDetectorPackage
using this compiler</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#Create an environment with the dependencies</span>
conda create -n myenv gxx_linux-64 cmake zmq
conda activate myenv

<span class="c1"># outside slsDetecorPackage folder</span>
mkdir build <span class="o">&amp;&amp;</span> <span class="nb">cd</span> build
cmake ../slsDetectorPackage -DCMAKE_PREFIX_PATH<span class="o">=</span><span class="nv">$CONDA_PREFIX</span>
make -j12
</pre></div>
</div>
</section>
<section id="build-slsdetectorgui-qt5">
<h3>Build slsDetectorGui (Qt5)<a class="headerlink" href="#build-slsdetectorgui-qt5" title="Permalink to this heading"></a></h3>
<ol class="arabic">
<li><dl>
<dt>Using pre-built binary on conda</dt><dd><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda create -n myenv <span class="nv">slsdetgui</span><span class="o">=</span><span class="m">7</span>.0.0
conda activate myenv
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>Using system installation on RHEL7</dt><dd><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>yum install qt5-qtbase-devel.x86_64
yum install qt5-qtsvg-devel.x86_64
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>Using conda</dt><dd><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#Add channels for dependencies and our library</span>
conda config --add channels conda-forge
conda config --add channels slsdetectorgroup
conda config --set channel_priority strict

<span class="c1"># create environment to compile</span>
<span class="c1"># on rhel7</span>
conda create -n slsgui zeromq gxx_linux-64 gxx_linux-64 mesa-libgl-devel-cos6-x86_64 qt
<span class="c1"># on fedora or newer systems</span>
conda create -n slsgui zeromq qt

<span class="c1"># when using conda compilers, would also need libgl, but no need for it on fedora unless maybe using it with ROOT</span>

<span class="c1"># activate environment</span>
conda activate slsgui

<span class="c1"># compile with cmake outside slsDetecorPackage folder</span>
mkdir build <span class="o">&amp;&amp;</span> <span class="nb">cd</span> build
cmake ../slsDetectorPackage -DSLS_USE_GUI<span class="o">=</span>ON
make -j12

<span class="c1"># or compile with cmk.sh</span>
<span class="nb">cd</span> slsDetectorPackage
./cmk.sh -cbgj9
</pre></div>
</div>
</dd>
</dl>
</li>
</ol>
</section>
<section id="build-this-documentation">
<h3>Build this documentation<a class="headerlink" href="#build-this-documentation" title="Permalink to this heading"></a></h3>
<p>The documentation for the slsDetectorPackage is build using a combination
of Doxygen, Sphinx and Breathe. The easiest way to install the dependencies
is to use conda</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda create -n myenv python sphinx_rtd_theme breathe
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># using cmake or ccmake to enable DSLS_BUILD_DOCS</span>
<span class="c1"># outside slsDetecorPackage folder</span>
mkdir build <span class="o">&amp;&amp;</span> <span class="nb">cd</span> build
cmake ../slsDetectorPackage -DSLS_BUILD_DOCS<span class="o">=</span>ON

make docs <span class="c1"># generate API docs and build Sphinx RST</span>
make rst <span class="c1"># rst only, saves time in case the API did not change</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to slsDetectorPackage’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="dependencies.html" class="btn btn-neutral float-right" title="Dependencies" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, PSD Detector Group.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>